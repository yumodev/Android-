[TOC]

### 6.1 概述

### 6.2 无关性基石

各种不同平台的虚拟机与所有平台都同意使用程序存储格式-字节码是构成平台无关性的基石。

### 6.3 Class类文件的结构

Class文件是一组以8位字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑的排列在Class文件之中，中间没有添加爱人和分隔符。
Class文件格式采用一种类似于c语言结构体的微结构来存储，只有两种数据类型：无符号数和表。

#### 6.3.1 魔数和class文件的版本。

每个Class文件的头4个字节成为魔数，它的唯一作用就是用于确定这个文件是否稍微一个能被虚拟机结构的Class文件。
魔数为：0xCAFEBABE
接着魔数的4个字节分贝数Class的版本号：第5-6个字节是次版本号（Minor Version）。 第7-8个字节是主版本号（Major Version）

#### 6.3.2 常量池

紧接着主次版本号的是常量池入口。常量池是Class文件结构中与其他项目关联最多的数据类型，也是占用Class文件空间最大的数据项目之一，同时它还是在Class文件件中第一个出现的表类型的数据项目。
0x0016 

常量池中主要存放：字面量、符号符号常量。
符号常量主要为：类和接口的全限定名，字段的名称和描述符，方法的名称和描述符。
常量池中中的每一项常量都是一个表，共有11种结构各不相同的表结构数据。这11种表都有一个共同的特点就是表开始的第一位是一个u1类型的标志位（tag 取值为1-12，缺少标志位2的数据类型。）

#### 6.3.3 访问标志

常量池结束之后，紧接着的2个字节代表为访问标志：access_flags , 这个接口从来识别一些类或接口层次的访问信息，包括这个Class是类还是接口，是否定义为public类型；是否定义为abstract类型，如果是类的话，是否生命为Finalize等等。

#### 6.3.4 类索引、父类索引和接口索引的结合。

类索引和父类索引都是一个u2类型的数据，而接口索引结合是一组u2类型的结合的数据。
类索引、父类索引和接口索引集合都按照顺序排列在访问标志位以后。

#### 6.3.5 字段的集合

field_ifno 是用于描述接口和类中声明的遍历。字段field包含了类级变量或实例级变量，但不包括方法内部声明的变量。

#### 6.3.6 方法表的集合

#### 6.3.7 属性表的集合。

attribute_info 。在class文件、字段表、方法标志哄都可以携带自己的属性表集合。

#### 6.4 Class文件结构的发展。




