[TOC]

### 什么是GC机制

#### 两种GC

* MinorGC 新生代，采用复制算法。
* FullGC 老年代 标记-清除 或者 标记-整理的算法。

####  内存有哪些分区

线程共有:  方法区(永久代)、堆、运行时常量池、直接内存
线程私有：程序计数器、本地方法栈、虚拟机栈、

#### 堆

存放对象，分为新生代和老年代。
新生代存放普通的对象实例，分为Eden区和两个幸存区。使用Eden去和一个幸存区，回收时就将Eden区和这个幸存区的活着的对象复制到另外一个幸存区。

#### 栈

线程私有的，存放局部变量的。抛出的StackOverFlowError异常。

#### 回收激活对象

finalize() 方法可以激活对象、回收对象，只能激活一次，不能保证每次都调用。

### 判定对象垃圾对象的算法

#### 引用计数法

#### 根搜索算法

通过GC Roots 找出所有的活的对象，然后将不可达的对象，回收掉，这个过程是要线程停顿的，停顿时间将由内存对象的多少来决定，所以不是回收次数越多越好。

#### GC Roots对象

* 虚拟机栈中引用的对象
* 方法区中类静态属性引用的对象。
* 方法区中常量引用的对象。
* 本地方法栈中的对象.JNI

### 垃圾收集算法

#### 标记-清除算法

先标记要回收的，然后一次性回收。效率不高。

#### 复制算法

分为Eden，Survivor1，Survivor2区。将活着的对象像懂Eden和Survivor1复制到输入vivor2区中。
分配担保的概念。

#### 标记-整理算法

标记，然后移动整理，避免了大量的复制。

#### 分代收集算法

### 内存分配策略

#### 对象优先在Eden上分配

#### 大对象直接进入老年代

#### 长期存活的对象将进入老年代
#### 动态对象的年龄判定

#### 空间分配担保

### 垃圾收集器
#### Serial收集器
新生代-复制算法-串行
#### ParNew收集器
新生代-复制算法-多线程。
#### Parallel Scavenge收集器
新生代-复制算法，关注吞吐量。
#### Serial Old收集器
老年代-标记整理-单线程。

#### parallelOld

老年代+配合Parallel Scavenge收集器

#### CMS收集器

老年代收集器。标记-清除算法。

#### G1收集器


### 面试问题

#### GC

* GC root的判定
   就是对象和静态对象的实例
   
* GC策略都有什么分类。

* 各种垃圾收集器--CMS。

*  一个对象什么时候才会被GC。
   没有引用，且finalize()方法也没有激活的时候，就会回收了。
   
*  Java对象如何展开自救。
    finalize()里面，重新应用一次就可以了，但是也只能自救一次
    
* System.gc()和Runtime.gc()
       
       提醒虚拟机回收
       
#### 内存模型。

* 导致栈溢出的情况。
* 虚拟机内存调优。
* 堆和栈的区别。
* 内存回收为什么会造成卡顿。
* Java内存回收机制：新生代，老年代，gc机制。
* Java那个内存分区造成了内存溢出。






