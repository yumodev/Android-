### 8.1 概述

执行引擎是Java虚拟机最核心的部分。

### 8.2 运行时栈帧的结构

栈帧（stack frame）是用于支持虚拟机进行方法调用和方法执行的数据结构。它是虚拟机运行时数据区中的虚拟机栈的栈元素。栈帧存储了方法的局部变量表、操作数栈、动态链接和方法返回地址等信息。每一个方法从调用开始到执行完成的过程，就对应着一个栈帧在虚拟机栈里面从入栈到出栈的过程。
在编译程序代码的时候，栈帧中需要到偶的局部变量表，多深的操作数栈都已经完全确定了，并且写入到方法表的code属性之中。
对于执行引擎来说，活动线程中，只有栈顶的栈帧是有效的，成为当前栈帧、这个栈帧锁关联的方法成为当前方法，执行引擎所运行的所有字节码指令都是针对当前栈帧进行的操作。

#### 8.2.1 局部变量表

局部变量表示一组变量值存储空间，用于存放方法参数和方法内部定义的局部变量。
局部变量表的容量以变量槽为最小单位。

#### 8.2.2 操作数栈

成为操作栈，是一个后入先出的栈。
当一个方法刚刚开始执行的时候，这个而方法的操作数栈是空在，在方法的执行过程中，会有各种字节码指令向操作数栈中写入和提取内容，也就是入栈和出栈操作。

#### 8.2.3 动态链接



#### 8.2.4 方法返回地址。


#### 8.2.5 附加信息。

###8.3 方法调用

方法调用不等于方法的执行，而是确定被调用方法的本本。在程序运行时，进行方法调用时最普遍和频繁的操作。Class文件存储的只是符号引用，而不包括方法在实际运行时内存布局中的入口地址。

#### 8.3.1 解析

方法在程序真正运行之前就有一个可确定的调用版本，并且这个方法的调用版本在运行期间是不可以改变的。这些方法的调用成为解析。
符合编译期可知，运行期不可变的要求的方法主要有静态方法和私有方法两大类，

#### 8.3.2 分派。

1、静态分派：

依赖静态类型来定位方法执行的版本的分派动作，成为静态分派。静态分派的最典型应用就方法重载。静态分派发生在编译阶段。

2、动态分派

重写是动态分配的典型因公。
3、单分派和多分派

### 8.4 基于栈的字节码解释执行引擎。

#### 8.4.1 解释执行。

Javac编译期完成了程序代码经过词法分析、语法分析、到抽象语法树，在遍历语法树生成线性的字节码指令流的过程。因为这一动作是在Java虚拟机之外进行的。而解释器在虚拟机的内部，所有Java程序的编译就是半独立的表现。

#### 8.4.2 基于栈的指令集与基于寄存器的指令集。


#### 8.4.3 基于栈的解释器执行过程。




